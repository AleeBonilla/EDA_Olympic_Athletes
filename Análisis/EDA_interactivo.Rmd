---
title: "EDA - Atletas Olímpicos"
author: "Alexander Bonilla & Andres Rodríguez"
output: 
  html_document:
    theme: cosmo
    toc: true
    toc_depth: 2
    number_sections: true
---

  
```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)

library(tidyverse)
library(plotly)
library(ggplot2)
library(dplyr)
library(patchwork)
atletas <- read_csv("../Dataset/athlete_events.csv")

```

<br>
  
  <div style="text-align: center;">
  <img src="../Imágenes/Anillos.png" alt="Logo olímpico" width="300px" />
<<<<<<< HEAD
</div>

<br>

## Introducción

Los **Juegos Olímpicos** modernos representan uno de los eventos deportivos más influyentes y de mayor relevancia a nivel mundial. Desde su instauración a finales del siglo XIX y su consolidación a partir de 1900, han reunido a millones de atletas provenientes de todo el mundo, quienes compiten en una amplia variedad de disciplinas. A lo largo de las décadas, los Juegos Olímpicos no solo han sido un escenario para la excelencia deportiva, sino también un reflejo de importantes transformaciones sociales, culturales y políticas a nivel global.
=======
  </div>
  
  <br>
  
  ## Introducción
  
  Los  **Juegos Olímpicos ** modernos han sido uno de los eventos deportivos más importantes del mundo desde los años 1900. A lo largo de más de un siglo, millones de atletas han representado a sus países en cientos de disciplinas, dejando una huella histórica que refleja no solo la evolución del deporte, sino también los cambios sociales, políticos y culturales del mundo.
>>>>>>> 5b2f25213bcf4042f75ad3e1cf5583dfd7cf7a73

Este evento ha evolucionado significativamente con el tiempo, incorporando nuevos deportes, promoviendo la equidad de género y adaptándose a los cambios tecnológicos. Todo este proceso ha quedado registrado en diversas fuentes de datos que hoy en día permiten realizar estudios analíticos sobre la historia olímpica.

## Descripción del problema

A pesar de la riqueza histórica de los Juegos Olímpicos, muchos de los factores que determinan el éxito de los atletas aún no han sido explorados de forma profunda desde una perspectiva cuantitativa. La disponibilidad de datos detallados sobre los atletas, disciplinas, resultados y eventos ofrece una oportunidad valiosa para investigar qué características influyen en la obtención de medallas y el rendimiento olímpico.

Este proyecto se enfoca en la realización de un Análisis Exploratorio de Datos (EDA) con el objetivo de identificar los principales patrones, distribuciones y relaciones entre variables que puedan estar asociadas con el éxito de los atletas. A través de visualizaciones interactivas, se buscará facilitar la interpretación de los datos y descubrir tendencias significativas que ayuden a comprender mejor el perfil de los atletas más exitosos en los Juegos Olímpicos.

## Definición de fuente de datos

El análisis se basa en el conjunto de datos titulado “120 years of Olympic history: athletes and results”, el cual está disponible en la plataforma Kaggle. Este dataset contiene información detallada sobre más de 120 años de historia olímpica, incluyendo las siguientes variables:

* ID - Unique number for each athlete
* Name - Athlete's name
* Sex - M or F
* Age - Integer
* Height - In centimeters
* Weight - In kilograms
* Team - Team name
* NOC - National Olympic Committee 3-letter code
* Games - Year and season
* Year - Integer
* Season - Summer or Winter
* City - Host city
* Sport - Sport
* Event - Event
* Medal - Gold, Silver, Bronze, or NA

## Visualizaciones y análisis

### Análisis univariado

En esta sección, exploraremos algunas de las variables más interesantes del conjunto de datos a través de gráficos univariable. Estos gráficos nos permitirán comprender mejor la distribución de los datos en términos de **atributos individuales**, sin considerar las relaciones entre variables. Los tres gráficos que se presentarán a continuación destacan patrones significativos y tendencias en aspectos clave de los atletas y deportes olímpicos.

Los gráficos a continuación incluyen:
  
  1. **Frecuencia** de participación por deporte: Exploraremos los deportes más populares en los cuales los atletas han competido.

2. Distribución de **edades** de los atletas: Examinaremos la distribución de edades, identificando si existen diferencias notorias.

3. Distribución del **peso** de los atletas: Visualizaremos en qué peso se agrupan los atletas olímpicos.

#### Frecuencia de participación por deporte

```{r unidimensional1, echo=FALSE}

deportes_data <- atletas %>%
  filter(!is.na(Sport)) %>%
  count(Sport, name = "Participaciones") %>%
  arrange(desc(Participaciones)) %>%
  top_n(25, Participaciones)  

grafico_deportes <- ggplot(deportes_data, aes(x = reorder(Sport, Participaciones), y = Participaciones, fill = Sport)) +
  geom_col(show.legend = FALSE) +
  coord_flip() +
  labs(x = "", y = "") +
  theme_minimal()

plotly::ggplotly(grafico_deportes)

```

Podemos observar que disciplinas como el atletismo, la gimnasia y la natación se destacan ampliamente, liderando el número de eventos y atletas participantes. Esta alta frecuencia se debe a que estos deportes agrupan múltiples pruebas (carreras, saltos, estilos de nado, tipo de gimnasia, etc.) y cuentan con una fuerte tradición con los Juegos desde sus inicios.

También destacan deportes como el ciclismo, la esgrima y el tiro, que si bien no tienen tantas disciplinas internas como el atletismo, han mantenido una presencia sostenida en numerosas ediciones de los Juegos.

Esta distribución refleja tanto la popularidad histórica de ciertos deportes como la estructura del programa olímpico, que favorece a disciplinas con múltiples eventos y amplio acceso para atletas de distintas categorías.

#### Distribución de edades de los atletas

```{r unidimensional2, echo=FALSE}

edades_data <- atletas %>%
  filter(!is.na(Age), Age > 0, Age < 100)

grafico_edades <- ggplot(edades_data, aes(x = Age)) +
  geom_histogram(bins = 30, fill = "#69b3a2", color = "black", alpha = 0.7) +
  labs(title = "", x = "", y = "") +
  theme_minimal()

plotly::ggplotly(grafico_edades)

```

En el gráfico anterior se visualiza la distribución de edades de los atletas olímpicos. La mayoría de los participantes está entre los 20 y 30 años, lo cual es esperable considerando que muchas disciplinas deportivas exigen un alto rendimiento físico, propio de esta etapa de la vida. También se observan algunas participaciones fuera de ese rango, aunque en menor proporción, lo que sugiere la existencia de deportes donde los atletas pueden competir a edades más tempranas o avanzadas, lo que nos indica que hay deportes olímpicos donde el rendimeinto físico no es lo más importante.

#### Distribución del peso de los atletas

```{r unidimensional3, echo=FALSE}

peso_data <- atletas %>%
  filter(!is.na(Weight) & Weight > 0)

grafico_densidad_peso <- ggplot(peso_data, aes(x = Weight)) +
  geom_density(fill = "#D95F02", alpha = 0.7) +
  labs(x = "Peso (kg)", y = "Densidad") +
  theme_minimal()

plotly::ggplotly(grafico_densidad_peso)

```

El gráfico anterior muestra la distribución del peso de los atletas a lo largo de la historia olímpica. La curva presenta un pico pronunciado entre los 60 y 80 kg, lo que indica que una gran parte de los deportistas se concentra en ese rango. Sin embargo, también se observa una dispersión considerable hacia ambos extremos, reflejando la diversidad de requerimientos físicos según la disciplina deportiva. Lo anterior denota que existe una gran diversidad en los deportes y en los requerimientos de cada uno.

### Análisis bivariado

En esta sección, examinaremos relaciones entre **pares** de variables para descubrir patrones, correlaciones o diferencias relevantes dentro del conjunto de datos. El análisis bivariado nos permite entender cómo se comportan dos variables en conjunto, que clave para identificar tendencias más profundas y contextos específicos.

Los análisis bivariados seleccionados incluyen:
  
  1. Participación por **sexo** a lo largo del **tiempo**: Observaremos cómo ha cambiado la cantidad de atletas hombres y mujeres a lo largo de los años.

2. Cantidad de **medallas** ganadas por **país**: Destacaremos los países (NOC) que más medallas ganaron en toda la historia.

#### Participación por sexo a lo largo del tiempo

```{r bidimensional1, echo=FALSE}

sexo_tiempo <- atletas %>%
  filter(!is.na(Sex), !is.na(Year)) %>%
  distinct(ID, Year, Sex) %>% 
  count(Year, Sex, name = "Cantidad")

grafico_lineas <- ggplot(sexo_tiempo, aes(x = Year, y = Cantidad, color = Sex)) +
  geom_line(size = 1.2) +
  labs(x = "", y = "") +
  scale_color_manual(values = c("F" = "#FF69B4", "M" = "#1E90FF")) +
  theme_minimal()

plotly::ggplotly(grafico_lineas)

```

En el gráfico anterior se aprecia una marcada diferencia entre la participación masculina y femenina en los Juegos Olímpicos. En las primeras ediciones, la presencia de mujeres fue casi inexistente; sin embargo, a partir de la segunda mitad del siglo XX, su participación creció de forma significativa, reflejando transformaciones sociales y culturales que favorecieron una mayor inclusión de las atletas en el evento.

En contraste, la participación masculina, aunque históricamente mayoritaria, ha mostrado un crecimiento más estable y lineal. No obstante, en las últimas décadas, la diferencia entre ambos sexos se ha ido reduciendo progresivamente.

Este comportamiento sugiere una convergencia en la representación de ambos sexos, particularmente en los Juegos Olímpicos más recientes, donde se ha promovido activamente la igualdad de oportunidades y se han añadido eventos exclusivamente femeninos, masculinos o mixtos.

#### Cantidad de medallas ganadas por país

```{r bidimensional2, echo=FALSE}

medallas_por_noc <- atletas %>%
  filter(!is.na(Medal)) %>%
  count(NOC, name = "Medallas") %>%
  arrange(desc(Medallas)) %>%
  top_n(20, Medallas)  

grafico_medallas <- ggplot(medallas_por_noc, aes(x = reorder(NOC, Medallas), y = Medallas, fill = NOC)) +
  geom_col(show.legend = FALSE) +
  coord_flip() +
  labs(x = "NOC (País)", y = "Cantidad de medallas") +
  theme_minimal()

plotly::ggplotly(grafico_medallas)

```

Se pueden ver los 20 Comités Olímpicos Nacionales (NOC) con mayor cantidad de medallas obtenidas a lo largo de la historia de los Juegos. Se nota que hay una marcada concentración de medallas en un pequeño grupo de países, destacando especialmente potencias deportivas como Estados Unidos, Rusia, Alemania o Reino Unido.

Esta concentración refleja no solo el alto rendimiento de estos países en múltiples disciplinas, sino también factores como la inversión en infraestructura deportiva, el desarrollo de programas de alto rendimiento y la participación constante en las ediciones olímpicas. De lo anterior se puede concluir que una de las razones por las cuales las grandes potencias se mantienen con una gran cantidad de medallas debido en gran parte debido a la capacidad de inversión que tienen.

##Análisis Multidimensional 
En esta sección se combinarán un conjunto de variables en una misma visualización, esto con el fin de observar patrones complejos. Esto puede ser de utilidad cuando se quiere ver cómo influyen varias características simultáneamente.

Se analizará la distribución del peso, altura y edad de 500 atletas atletas según el género y deporte. Los deportes a analizar en este caso serán: Gimnasia, Atletismo y Natación.

###Caraterísticas físicas por deporte
```{r multidimensional, echo=FALSE}
DatosMult <- atletas%>%
  filter(!is.na(Age),!is.na(Height), !is.na(Weight), !is.na(Sex), Sport %in% c("Athletics", "Gymnastics", "Swimming"))%>%
  slice_sample(n=500)

grafico_multi <- ggplot(DatosMult, aes(x = Age, y = Weight, color = Sex, size = Height)) +
  geom_point(alpha = 0.5) +
  facet_wrap(~Sport) +
  labs(x = "Edad", y = "Peso (kg)", color = "Sexo", size="Altura (cm)") +
  theme_minimal()

plotly::ggplotly(grafico_multi)

```

Se observa que cada diciplina presenta algunos patrones peculiares, en gimnasia, la mayoria son atletas jóvenes y livianos, especialmente mujeres; en atletismo, la dispersión es amplia debido a la variedad de pruebas, en natación, los atletas se concentran entre los 18 y 30 años, con pesos moderadamente altos.

La diferencia entre hombres y mujeres on consistentes en todos los deportes, los hombres tienden a tener un peso más alto y el rango de edad es mayor, mientras que las mujeres se concentran en un espacio más epecífico. Esto refleja las diferente exigencias que presenta cada deportey como influye en el físico de lo atletas.



##Facetas
Las facetas permiten dividir un gráfico en múltiples paneles según una variable categórica, facilitando la comparación entre subgrupos de datos. En este caso, se usó la variable NOC (país) para crear un panel por país, lo que permite analizar de forma clara y ordenada cómo se comportan las demás variables dentro de cada país, manteniendo el mismo tipo de visualización y escala.

###Rango de edad por deporte

```{r facetas_medallas, echo=FALSE}

# Filtrar atletas con medalla y algunos países específicos para no saturar
faceta_medallas <- atletas %>%
  filter(!is.na(Medal), 
         NOC %in% c("USA", "RUS", "CHN", "GBR", "GER")) %>%
  group_by(Year, Medal, NOC) %>%
  summarise(Atletas = n(), .groups = "drop")

# Gráfico
grafico_medallas_facetas <- ggplot(faceta_medallas, aes(x = Year, y = Atletas, fill = Medal)) +
  geom_col(position = "stack") +
  facet_wrap(~NOC) +
  scale_fill_manual(values = c("Gold" = "#FFD700", "Silver" = "#C0C0C0", "Bronze" = "#cd7f32")) +
  labs(x = "Año", y = "Cantidad de medallistas", fill = "Medalla") +
  theme_minimal()

plotly::ggplotly(grafico_medallas_facetas)

```
El gráfico muestra la cantidad de atletas que han ganado medallas a lo largo del tiempo en cinco países: Estados Unidos (USA), Rusia (RUS), China (CHN), Inglaterra (ENG) y Alemania (GER). Se evidencia un dominio claro de Estados Unidos, con una presencia constante y masiva de medallas en casi todas las ediciones. Rusia también muestra un alto desempeño, especialmente durante el periodo soviético, mientras que China emerge con fuerza a partir del año 2000. Inglaterra y Alemania presentan un rendimiento sólido pero más variable, con repuntes en ediciones específicas. Las facetas hacen evidente cómo ha evolucionado el protagonismo olímpico de cada país a lo largo del tiempo.

##Imagen compuestada
Un gráfico compuesto permite visualizar múltiples aspectos de un conjunto de datos al integrar varios gráficos individuales en una sola imagen. Esto facilita la comparación simultánea de diferentes variables y relaciones, haciendo más eficiente la exploración de patrones complejos. Al usar variables menos convencionales como el año, la medalla obtenida, el evento, y la estación de competencia, este tipo de gráfico revela dimensiones del comportamiento de los atletas que no serían evidentes en visualizaciones simples o aisladas.

###-
```{r compuesta, echo=FALSE}


# Filtrado base
base <- atletas %>%
  filter(!is.na(Year), !is.na(Medal), !is.na(Event), !is.na(NOC), !is.na(Season))

# Gráfico 1: Distribución de atletas por año
g1 <- ggplot(base, aes(x = Year)) +
  geom_histogram(binwidth = 4, fill = "#8da0cb", color = "black") +
  labs(title = "Participaciones por Año", x = "Año", y = "Cantidad") +
  theme_minimal()

# Gráfico 2: Medallas por tipo
g2 <- base %>%
  filter(Medal != "NA") %>%
  ggplot(aes(x = Medal, fill = Medal)) +
  geom_bar() +
  labs(title = "Distribución de Medallas", x = "Medalla", y = "Cantidad") +
  scale_fill_manual(values = c("Gold" = "#ffd700", "Silver" = "#c0c0c0", "Bronze" = "#cd7f32")) +
  theme_minimal()

# Gráfico 3: Eventos más comunes
top_eventos <- base %>%
  count(Event, sort = TRUE) %>%
  slice_max(n, n = 10)

g3 <- ggplot(top_eventos, aes(x = reorder(Event, n), y = n)) +
  geom_col(fill = "#fc8d62") +
  coord_flip() +
  labs(title = "Top 10 Eventos Olímpicos", x = "Evento", y = "Cantidad") +
  theme_minimal()

# Gráfico 4: Participaciones por estación
g4 <- ggplot(base, aes(x = Season, fill = Season)) +
  geom_bar() +
  scale_fill_manual(values = c("Summer" = "#66c2a5", "Winter" = "#a6d854")) +
  labs(title = "Temporada de los Juegos", x = "Estación", y = "Cantidad") +
  theme_minimal()

# Imagen compuesta
p1 <- ggplotly(g1)
p2 <- ggplotly(g2)
p3 <- ggplotly(g3)
p4 <- ggplotly(g4)

# Combinar en una imagen compuesta
subplot(p1, p2, p3, p4, nrows = 2, margin = 0.05, titleX = TRUE, titleY = TRUE)

```
El gráfico compuesto muestra que la mayoría de las participaciones olímpicas han ocurrido en los Juegos de Verano, con un crecimiento progresivo a lo largo del tiempo y una mayor frecuencia en eventos populares como atletismo y natación. La distribución de medallas evidencia una gran proporción de atletas sin premio, y una menor cantidad de oros, lo que sugiere alta competencia. Al combinar estas visualizaciones, se obtiene una vista general del desarrollo histórico, la concentración de disciplinas y la estructura del rendimiento olímpico.
